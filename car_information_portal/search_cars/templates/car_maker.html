{% extends 'base.html' %}

{% block content %}
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit</button>
</form>

<script>
    (() => {
        let httpRequest;
        document
            .getElementById("make_id")
            .addEventListener("change")

        function makeRequest() {
            httpRequest = new XMLHttpRequest();

            if (!httpRequest) {
                alert('中断 :( XMLHTTP インスタンスを生成できませんでした');
                return false;
            }
            httpRequest.onreadystatechange = alertContents;
            httpRequest.open("GET", "base.html");
            httpRequest.send();
        }
        function alertContents() {
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
                if (httpRequest.status === 200) {
                    alert(httpRequest.responseText);
                } else {
                    alert('リクエストに問題が発生しました');
                }
            }
        }
    })


</script>
{% endblock %}